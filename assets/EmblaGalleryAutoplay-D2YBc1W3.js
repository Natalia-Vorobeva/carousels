import{r as l,j as e}from"./index-CYnCJfz6.js";import{u as y}from"./embla-carousel-react.esm-DIfLSL1l.js";import{e as u}from"./constants-1iJL8PVr.js";const N=d=>1-Math.pow(1-d,3);function I(){const[d,t]=y({loop:!1,duration:50,easing:N}),c=l.useRef(null),[s,f]=l.useState(!0),[m,p]=l.useState(0),[r,h]=l.useState(!1),b=l.useCallback(()=>{t&&p(t.selectedScrollSnap())},[t]),x=l.useCallback(()=>{if(!t)return;t.selectedScrollSnap()===u.length-1?(h(!0),setTimeout(()=>{t.scrollTo(0),setTimeout(()=>{h(!1)},500)},50)):t.scrollNext()},[t]),o=l.useCallback(()=>{!t||r||(a(),c.current=setInterval(()=>{x()},3500))},[t,r,x]),a=l.useCallback(()=>{c.current&&(clearInterval(c.current),c.current=null)},[]),w=()=>{s?a():o(),f(!s)},g=l.useCallback(()=>{r||(a(),x(),s&&setTimeout(o,100))},[r,a,x,s,o]),v=l.useCallback(()=>{r||(a(),t&&t.scrollPrev(),s&&setTimeout(o,100))},[t,s,o,a,r]);l.useEffect(()=>{if(t)return t.on("select",b),s&&o(),()=>{a(),t.off("select",b)}},[t,s,o,a,b]);const j=()=>e.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-white text-4xl mb-4 animate-spin",children:"⟳"}),e.jsx("p",{className:"text-white text-lg",children:"Переходим к началу..."})]})});return e.jsx("div",{className:"min-h-screen flex items-start justify-center px-4 pt-10",children:e.jsxs("div",{className:"relative max-w-5xl mx-auto rounded-2xl overflow-hidden shadow-2xl w-full",children:[r&&e.jsx(j,{}),e.jsx("div",{className:"embla overflow-hidden",ref:d,children:e.jsx("div",{className:"embla__container flex",children:u.map((n,i)=>e.jsx("div",{className:"embla__slide flex-[0_0_100%] min-w-0 relative",children:e.jsxs("div",{className:"relative h-[60vh] max-h-[600px] min-h-[300px]",children:[e.jsx("img",{src:n.src,alt:n.alt,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 via-black/30 to-transparent"}),e.jsxs("div",{className:"absolute left-4 sm:left-8 md:left-16 top-1/2 transform -translate-y-1/2 text-white max-w-xs sm:max-w-md md:max-w-lg px-2 sm:px-0",children:[e.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-5xl font-bold mb-2 sm:mb-4",children:n.title}),e.jsx("p",{className:"text-sm sm:text-base md:text-xl lg:text-2xl mb-4 sm:mb-8 opacity-90",children:n.subtitle}),e.jsx("button",{className:"bg-white text-black text-sm sm:text-base font-bold px-4 sm:px-6 md:px-8 py-2 sm:py-3 rounded-full hover:bg-gray-100 transition-colors",children:"Записаться"})]})]})},n.id))})}),!r&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:v,className:"absolute left-2 sm:left-4 top-1/2 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-white/20 backdrop-blur-sm text-white rounded-full flex items-center justify-center hover:bg-white/30 transition-all z-40","aria-label":"Предыдущий слайд",children:"←"}),e.jsx("button",{onClick:g,className:"absolute right-2 sm:right-4 top-1/2 transform -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-white/20 backdrop-blur-sm text-white rounded-full flex items-center justify-center hover:bg-white/30 transition-all z-40","aria-label":"Следующий слайд",children:"→"}),e.jsx("button",{onClick:w,className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-black/50 backdrop-blur-sm text-white rounded-full flex items-center justify-center hover:bg-black/70 transition-all z-40","aria-label":s?"Пауза":"Воспроизвести",children:s?"⏸":"▶"}),e.jsx("div",{className:"absolute bottom-2 sm:bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-1 sm:space-x-2 z-40",children:u.map((n,i)=>e.jsx("button",{onClick:()=>{a(),t&&t.scrollTo(i),s&&setTimeout(o,100)},className:`w-8 sm:w-12 md:w-16 h-1 rounded overflow-hidden transition-all ${i===m?"bg-white/80":"bg-white/30 hover:bg-white/50"}`,"aria-label":`Перейти к слайду ${i+1}`,children:e.jsx("div",{className:`h-full ${i===m?"bg-white":"bg-transparent"} ${s&&i===m?"animate-progress":""}`,style:{animationDuration:"3.5s"}})},i))}),e.jsxs("div",{className:"absolute top-4 right-4 bg-black/50 backdrop-blur-sm text-white px-3 py-1 rounded-full text-sm z-40",children:[m+1," / ",u.length]})]})]})})}export{I as default};
